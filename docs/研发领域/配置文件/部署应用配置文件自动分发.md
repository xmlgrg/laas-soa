运维端需要开放数据, 相比于之前的直接开放连接信息字符串, 现在开放的是连接字符串的引用key, 需要组合形的描述清楚数据的位置、作用、形式、连接信息案例

这个动作相当于声明变量及值, 而下面使用方则是使用引用链接使用变量, 在实际填充值的时候会根据应用的环境去自动添加对应环境的值, 即添加_环境名的变量名后缀







一个项目可以有多个配置文件, 需要标注配置文件位置和文件名, 可以链接使用同一个文件, 在实际最终使用时为多个文件

一个项目有多个环境, 每个环境的配置可以不一样, 也可以一样, 一样时使用软链接

多个项目可以使用相同的配置文件, 一样时使用软链接



环境依序为: dev_local>dev>stage>pre>product

从dev环境开始就需要开发人员编写/调整配置文件模板, 配置文件模板与配置文件的区别在于模板中的值都是使用引用符号进行引用值



数据修改会形成版本(拥有版本号), 例如: 修改项目的配置、修改环境的配置、修改配置文件

项目-环境-配置-配置文件的变更后都会生成一个变更信号, 用户-角色可以订阅数据变更, 自动对订阅了变更的用户-角色进行消息推送, 具体表现为发送通过企业微信发送一个通知, 用户可以启用/关闭消息通知而使用web界面统一观看



配置文件工单, 设置编辑期望文件, 当流程完成时自动自动合并/覆盖到指定项目的指定环境的指定配置文件中, 此工单与其他工单一起工作, 回滚时反向回滚即可

配置文件中使用模板语言/字符串 替换

存储到数据库的数据可以标记为敏感数据, 敏感数据对称加密, 但是加密密钥复杂必须加强



在构建过程中, 根据构建时的参数: 环境, 项目名, 路径 进行判断项目及环境

根据该项目配置的指定环境的配置文件路径及名称进行覆盖源码中的配置文件



构建时配置配置文件和运行时配置配置文件的区别和相同点:

构建时配置配置文件容易理解, 原来配置文件在哪里则直接替换覆盖哪里, 程序有静态和动态两种, 静态项目的配置文件不管在构建时还是运行时都是可以直接根据磁盘目录进行覆盖的,例如php/python等, 但是动态项目, 例如java/golang/nodejs, 构建完之后是没办法进行修改内部的配置文件, 只能修改源码指向外部磁盘配置文件

按照趋势来说, 配置文件和代码放在一起是有很大风险的, 镜像(docker镜像)并不能保证文件的安全性, 一旦泄密则所有中间件/服务的连接信息都会泄密; 配置文件外部化是一个趋势, 这就意味着一份代码可以运行在多个环境中, 可以使用配置中心将配置文件收集起来统一管理, 存在配置中心的配置文件中敏感信息进行分别使用不同密钥进行加密

相同点在于, 这个问题上面的动作都是一样的, 在已有的工作模式下可以先去覆盖没有的功能, 再去完善优化已有的

